package vn.DA_KNNN.View;

import javax.swing.*;

import vn.DA_KNNN.Controller.LayoutController;
import vn.DA_KNNN.Controller.MainController;

import java.awt.*;

public class LayoutView extends JFrame {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private JPanel contentPanel; // Panel chính để thay đổi giao diện
	private JButton btnHome;
	private JButton btnCategory;
	private JButton btnBook;
	private JButton btnCustomer;
	private JButton btnSale;
	private JButton btnEmployee;
	private JButton btnRevenue;
	private JPanel panel, buttonPanel;
	private JButton btnLogout;

	public JPanel getContentPanel() {
		return contentPanel;
	}

	public JButton getBtnHome() {
		return btnHome;
	}

	public JButton getBtnCategory() {
		return btnCategory;
	}

	public JButton getBtnBook() {
		return btnBook;
	}

	public JButton getBtnSale() {
		return btnSale;
	}

	public JButton getBtnCustomer() {
		return btnCustomer;
	}

	public JButton getBtnEmployee() {
		return btnEmployee;
	}

	public JButton getBtnRevenue() {
		return btnRevenue;
	}

	public JButton getBtnLogout() {
		return btnLogout;
	}

	public JPanel getMenuButton() {
		return this.buttonPanel;
	}

	public LayoutView() {
		try {
			UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
		} catch (Exception e) {
			e.printStackTrace();
		}

		ImageIcon icon = new ImageIcon(getClass().getResource("/images/imgIcon.jpeg"));
		setIconImage(icon.getImage());
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setTitle("Đăng nhập");
		setSize(1000, 600);
		setMinimumSize(new Dimension(1000, 600)); // Đặt kích thước tối thiểu

		getContentPane().setLayout(new BorderLayout());
		// Tạo sidebar
		JPanel sidebar = createSidebar();
		getContentPane().add(sidebar, BorderLayout.WEST);

		// Tạo panel chính
		contentPanel = new JPanel(new BorderLayout());
		contentPanel.setBackground(Color.WHITE); // Màu nền mặc định
		getContentPane().add(contentPanel, BorderLayout.CENTER);

		MainView view = new MainView();
		new MainController(view);
		showContent(view);

	}

	private JPanel createSidebar() {
		JPanel sidebar = new JPanel();
		sidebar.setLayout(new BorderLayout());
		sidebar.setPreferredSize(new Dimension(200, 0)); // Đặt chiều rộng cố định cho sidebar
		sidebar.setBackground(new Color(60, 63, 65)); // Màu nền sidebar

		// Tiêu đề
		JLabel titleLabel = new JLabel("QKT", SwingConstants.CENTER);
		titleLabel.setFont(new Font("Tahoma", Font.BOLD, 36));
		titleLabel.setForeground(Color.WHITE);
		titleLabel.setPreferredSize(new Dimension(WIDTH, 100));
		sidebar.add(titleLabel, BorderLayout.NORTH);

		// Nút menu
		JPanel buttonPanel = createMenuButtons();
		sidebar.add(buttonPanel, BorderLayout.CENTER);

		panel = new JPanel();
		sidebar.add(panel, BorderLayout.SOUTH);
		panel.setLayout(new BorderLayout(0, 0));

		btnLogout = new JButton("Đăng xuất");
		btnLogout.setBackground(Color.RED);
		btnLogout.setOpaque(true);
		btnLogout.setBorderPainted(false);
		btnLogout.setPreferredSize(new Dimension(WIDTH, 50));
		btnLogout.setFont(new Font("Tahoma", Font.PLAIN, 20));
		panel.add(btnLogout);

		return sidebar;
	}

	private JPanel createMenuButtons() {
		buttonPanel = new JPanel(new GridLayout(10, 1, 0, 0));
		buttonPanel.setBackground(new Color(60, 63, 65)); // Màu nền của panel

		// Tạo các nút
		btnHome = new JButton("Home", setSizeImage("/images/book.png"));
		btnHome.setHorizontalAlignment(SwingConstants.LEADING);
		btnHome.setFont(new Font("Tahoma", Font.PLAIN, 20));

		// Đặt màu nền cho nút
		btnHome.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btnHome.setBackground(new Color(100, 100, 100)); // Màu nền xám cho nút
		btnHome.setOpaque(true); // Đảm bảo màu nền được áp dụng
		btnHome.setForeground(Color.WHITE); // Màu chữ trắng
		btnHome.setBorderPainted(false); // Tắt viền của nút
		
		btnBook = new JButton("Book", setSizeImage("/images/book.png"));
		btnBook.setFont(new Font("Tahoma", Font.PLAIN, 20));

		// Đặt màu nền cho nút
		btnBook.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btnBook.setBackground(new Color(100, 100, 100)); // Màu nền xám cho nút
		btnBook.setOpaque(true); // Đảm bảo màu nền được áp dụng
		btnBook.setForeground(Color.WHITE); // Màu chữ trắng
		btnBook.setBorderPainted(false); // Tắt viền của nút
		
		btnSale = new JButton("Sale", setSizeImage("/images/book.png"));
		btnSale.setFont(new Font("Tahoma", Font.PLAIN, 20));

		// Đặt màu nền cho nút
		btnSale.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btnSale.setBackground(new Color(100, 100, 100)); // Màu nền xám cho nút
		btnSale.setOpaque(true); // Đảm bảo màu nền được áp dụng
		btnSale.setForeground(Color.WHITE); // Màu chữ trắng
		btnSale.setBorderPainted(false); // Tắt viền của nút
		
//		btnCustomer = createButton("Customer");
		btnEmployee = new JButton("Employee", setSizeImage("/images/book.png"));
		btnEmployee.setFont(new Font("Tahoma", Font.PLAIN, 20));

		// Đặt màu nền cho nút
		btnEmployee.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btnEmployee.setBackground(new Color(100, 100, 100)); // Màu nền xám cho nút
		btnEmployee.setOpaque(true); // Đảm bảo màu nền được áp dụng
		btnEmployee.setForeground(Color.WHITE); // Màu chữ trắng
		btnEmployee.setBorderPainted(false); // Tắt viền của nút\
		
		btnRevenue = new JButton("Revenue", setSizeImage("/images/book.png"));
		btnRevenue.setFont(new Font("Tahoma", Font.PLAIN, 20));

		// Đặt màu nền cho nút
		btnRevenue.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btnRevenue.setBackground(new Color(100, 100, 100)); // Màu nền xám cho nút
		btnRevenue.setOpaque(true); // Đảm bảo màu nền được áp dụng
		btnRevenue.setForeground(Color.WHITE); // Màu chữ trắng
		btnRevenue.setBorderPainted(false); // Tắt viền của nút

		// Thêm các nút vào buttonPanel

		buttonPanel.add(btnHome);
		buttonPanel.add(btnBook);
		buttonPanel.add(btnSale);
//		buttonPanel.add(btnCustomer);
		buttonPanel.add(btnEmployee);
		buttonPanel.add(btnRevenue);

		return buttonPanel;
	}

    private static ImageIcon setSizeImage(String url) {
    	ImageIcon icon = new ImageIcon(Test.class.getResource(url));
        Image img = icon.getImage(); // Lấy đối tượng Image từ ImageIcon
        Image scaledImg = img.getScaledInstance(50, 50, Image.SCALE_SMOOTH); // Thay đổi kích thước
        ImageIcon scaledIcon = new ImageIcon(scaledImg); // Tạo ImageIcon từ hình đã thay đổi kích thước
        return scaledIcon;
    }

	// Hiển thị nội dung dựa trên tên
	public void showContent(JPanel content) {
		contentPanel.removeAll(); // Xóa nội dung cũ
		contentPanel.add(content, BorderLayout.CENTER);
		revalidate();
		repaint();
	}
}
