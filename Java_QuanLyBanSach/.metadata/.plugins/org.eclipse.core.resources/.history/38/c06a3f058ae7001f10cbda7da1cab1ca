package vn.DA_KNNN.Components;

import javax.swing.*;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.data.category.DefaultCategoryDataset;
import java.awt.Color;
import java.awt.Dimension;

public class ColumnChart extends JPanel {
    private static final long serialVersionUID = 1L;
    private int[] values;
    private String[] columnNames;
    private JFreeChart chart;
    private DefaultCategoryDataset dataset;
    private ChartPanel chartPanel;

    public ColumnChart() {
        this.values = new int[] { 10, 30, 20 };
        this.columnNames = new String[] { "A", "B", "C" };

        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
        dataset = new DefaultCategoryDataset();
        chart = createChart();
        chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new Dimension(600, 400));

        add(chartPanel);
        updateChart();
    }

    private JFreeChart createChart() {
        return ChartFactory.createBarChart(
                "Column Chart Example",
                "Thời điểm (Tháng)",
                "Doanh thu (VND)",
                dataset,
                org.jfree.chart.plot.PlotOrientation.VERTICAL,
                true,
                true,
                false
        );
    }

    public void updateChart() {
        dataset.clear();
        for (int i = 0; i < values.length; i++) {
            dataset.addValue(values[i], "Doanh thu", columnNames[i]);
        }
    }

    public void setValues(int[] values) {
        this.values = values;
        updateChart();
    }

    public void setColumnNames(String[] columnNames) {
        this.columnNames = columnNames;
        updateChart();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame("Column Chart Example");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(700, 500);
            ColumnChart columnChart = new ColumnChart();
            frame.getContentPane().add(columnChart);
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        });
    }
}
