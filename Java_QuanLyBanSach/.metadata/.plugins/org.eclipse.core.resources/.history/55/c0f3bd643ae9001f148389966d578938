package vn.DA_KNNN.View;

import javax.swing.*;

import vn.DA_KNNN.Controller.MainController;

import java.awt.*;

public class LayoutView extends JFrame {
    private static final long serialVersionUID = 1L;
    private JPanel contentPanel;
    private JPanel buttonPanel;
    private JButton btnHome, btnCategory, btnBook, btnCustomer, btnSale, btnEmployee, btnRevenue, btnLogout;

    public LayoutView() {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }

        setUpFrame();
        createSidebar();
        showMainView();
    }

    private void setUpFrame() {
        ImageIcon icon = new ImageIcon(getClass().getResource("/images/imgIcon.jpeg"));
        setIconImage(icon.getImage());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Đăng nhập");
        setSize(1000, 600);
        setMinimumSize(new Dimension(1000, 600)); 
        getContentPane().setLayout(new BorderLayout());
    }

    private void createSidebar() {
        JPanel sidebar = new JPanel();
        sidebar.setLayout(new BorderLayout());
        sidebar.setPreferredSize(new Dimension(200, 0));
        sidebar.setBackground(new Color(60, 63, 65));

        addSidebarTitle(sidebar);
        addMenuButtons(sidebar);
        addLogoutButton(sidebar);

        getContentPane().add(sidebar, BorderLayout.WEST);
    }

    private void addSidebarTitle(JPanel sidebar) {
        JLabel titleLabel = new JLabel("QKT", SwingConstants.CENTER);
        titleLabel.setFont(new Font("Tahoma", Font.BOLD, 36));
        titleLabel.setForeground(Color.WHITE);
        titleLabel.setPreferredSize(new Dimension(WIDTH, 100));
        sidebar.add(titleLabel, BorderLayout.NORTH);
    }

    private void addMenuButtons(JPanel sidebar) {
        buttonPanel = createMenuButtons();
        sidebar.add(buttonPanel, BorderLayout.CENTER);
    }

    private void addLogoutButton(JPanel sidebar) {
        JPanel panel = new JPanel();
        sidebar.add(panel, BorderLayout.SOUTH);
        panel.setLayout(new BorderLayout(0, 0));

        btnLogout = new JButton("Đăng xuất");
        btnLogout.setBackground(Color.RED);
        btnLogout.setOpaque(true);
        btnLogout.setBorderPainted(false);
        btnLogout.setPreferredSize(new Dimension(WIDTH, 50));
        btnLogout.setFont(new Font("Tahoma", Font.PLAIN, 20));
        panel.add(btnLogout);
    }

    private JPanel createMenuButtons() {
        buttonPanel = new JPanel(new GridLayout(10, 1, 0, 0));
        buttonPanel.setBackground(new Color(60, 63, 65));

        btnHome = createMenuButton("Home", "/images/home.png");
        btnBook = createMenuButton("Book", "/images/book.png");
        btnSale = createMenuButton("Sale", "/images/receipt.png");
        btnEmployee = createMenuButton("Employee", "/images/employee.png");
        btnRevenue = createMenuButton("Revenue", "/images/revenue.png");

        buttonPanel.add(btnHome);
        buttonPanel.add(btnBook);
        buttonPanel.add(btnSale);
        buttonPanel.add(btnEmployee);
        buttonPanel.add(btnRevenue);

        return buttonPanel;
    }

    private JButton createMenuButton(String text, String iconPath) {
        JButton button = new JButton(text, setSizeImage(iconPath));
        button.setHorizontalAlignment(SwingConstants.LEADING);
        button.setFont(new Font("Tahoma", Font.PLAIN, 20));
        button.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
        button.setBackground(new Color(100, 100, 100));
        button.setOpaque(true);
        button.setForeground(Color.WHITE);
        button.setBorderPainted(false);
        return button;
    }

    private static ImageIcon setSizeImage(String url) {
        ImageIcon icon = new ImageIcon(LayoutView.class.getResource(url));
        Image img = icon.getImage();
        Image scaledImg = img.getScaledInstance(50, 50, Image.SCALE_SMOOTH);
        return new ImageIcon(scaledImg);
    }

    private void showMainView() {
        MainView view = new MainView();
        new MainController(view);
        contentPanel.add(view);
    }

    public void showContent(JPanel content) {
        contentPanel.removeAll();
        contentPanel.add(content, BorderLayout.CENTER);
        revalidate();
        repaint();
    }

    public JPanel getContentPanel() {
        return contentPanel;
    }

    public JButton getBtnHome() {
        return btnHome;
    }

    public JButton getBtnCategory() {
        return btnCategory;
    }

    public JButton getBtnBook() {
        return btnBook;
    }

    public JButton getBtnSale() {
        return btnSale;
    }

    public JButton getBtnCustomer() {
        return btnCustomer;
    }

    public JButton getBtnEmployee() {
        return btnEmployee;
    }

    public JButton getBtnRevenue() {
        return btnRevenue;
    }

    public JButton getBtnLogout() {
        return btnLogout;
    }

    public JPanel getMenuButton() {
        return buttonPanel;
    }
}
