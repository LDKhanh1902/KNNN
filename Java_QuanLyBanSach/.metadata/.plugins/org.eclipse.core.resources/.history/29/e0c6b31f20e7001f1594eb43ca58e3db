package vn.DA_KNNN.View;

import javax.swing.*;
import vn.DA_KNNN.Components.PieChart;
import vn.DA_KNNN.Components.ColumnChart;
import java.awt.*;

public class MainView extends JPanel {
    private static final long serialVersionUID = 1L;
    private JLabel userInfo, bookCountLabel, staffCountLabel, customerCountLabel, revenueLabel;
    private PieChart pieChart;
    private ColumnChart columnChart;

    public MainView() {
        setLayout(new BorderLayout());
        setBackground(Color.WHITE);

        // **Header Panel**
        JPanel headerPanel = createHeader();
        add(headerPanel, BorderLayout.NORTH);

        // **Main Content Panel**
        JPanel mainContent = new JPanel();
        add(mainContent, BorderLayout.CENTER);
        mainContent.setLayout(new FlowLayout(FlowLayout.CENTER, 5, 5));

        // **Info Panel**
        JPanel infoPanel = createInfoPanel();
        mainContent.add(infoPanel);

        // **Chart Panel**
        JPanel chartPanel = createChartPanel();
        mainContent.add(chartPanel);

        // **Footer**
        JPanel footerPanel = createFooter();
        add(footerPanel, BorderLayout.SOUTH);
    }

    private JPanel createHeader() {
        JPanel headerPanel = new JPanel(new BorderLayout());
        headerPanel.setBackground(new Color(30, 144, 255));
        headerPanel.setPreferredSize(new Dimension(getWidth(), 60));

        JLabel title = new JLabel("üìö H·ªá th·ªëng Qu·∫£n l√Ω B√°n S√°ch", SwingConstants.CENTER);
        title.setForeground(Color.WHITE);
        title.setFont(new Font("Tahoma", Font.BOLD, 18));
        headerPanel.add(title, BorderLayout.CENTER);

        JPanel userPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 15, 10));
        userPanel.setOpaque(false);
        userInfo = new JLabel("üë§ Xin ch√†o, Nguy·ªÖn VƒÉn A");
        userInfo.setForeground(Color.WHITE);
        userInfo.setFont(new Font("Tahoma", Font.PLAIN, 14));
        userPanel.add(userInfo);

        headerPanel.add(userPanel, BorderLayout.EAST);
        return headerPanel;
    }

    private JPanel createInfoPanel() {
        JPanel infoPanel = new JPanel();
        infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.X_AXIS));
        infoPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        bookCountLabel = createInfoCard("üìö S·ªë l∆∞·ª£ng s√°ch: 120");
        staffCountLabel = createInfoCard("üë• S·ªë nh√¢n vi√™n: 10");
        customerCountLabel = createInfoCard("üõçÔ∏è S·ªë kh√°ch h√†ng: 250");
        revenueLabel = createInfoCard("üí∞ T·ªïng doanh thu: 5.000.000 VNƒê");

        infoPanel.add(bookCountLabel);
        infoPanel.add(Box.createHorizontalStrut(10));
        infoPanel.add(staffCountLabel);
        infoPanel.add(Box.createHorizontalStrut(10));
        infoPanel.add(customerCountLabel);
        infoPanel.add(Box.createHorizontalStrut(10));
        infoPanel.add(revenueLabel);

        return infoPanel;
    }

    private JLabel createInfoCard(String text) {
        JLabel label = new JLabel(text, SwingConstants.CENTER);
        label.setFont(new Font("Tahoma", Font.PLAIN, 14));
        label.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));
        label.setOpaque(true);
        label.setBackground(Color.WHITE);
        label.setPreferredSize(new Dimension(200, 80));
        return label;
    }

    private JPanel createChartPanel() {
        JPanel chartPanel = new JPanel();
        chartPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        chartPanel.setLayout(new BoxLayout(chartPanel, BoxLayout.X_AXIS));
        
        pieChart = new PieChart();
        columnChart = new ColumnChart();
        chartPanel.add(pieChart);
        chartPanel.add(columnChart);

        return chartPanel;
    }

    private JPanel createFooter() {
        JPanel footerPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 10, 10));
        footerPanel.setPreferredSize(new Dimension(getWidth(), 40));
        footerPanel.setBackground(new Color(70, 70, 70));

        JLabel footerLabel = new JLabel("¬© 2025 H·ªá th·ªëng Qu·∫£n l√Ω B√°n S√°ch - Nh√≥m 8");
        footerLabel.setForeground(Color.WHITE);
        footerPanel.add(footerLabel);

        return footerPanel;
    }

    public JLabel getUserInfo() { return userInfo; }
    public JLabel getBookCountLabel() { return bookCountLabel; }
    public JLabel getStaffCountLabel() { return staffCountLabel; }
    public JLabel getCustomerCountLabel() { return customerCountLabel; }
    public JLabel getRevenueLabel() { return revenueLabel; }
    public PieChart getPieChart() { return pieChart; }
    public ColumnChart getColumnChart() { return columnChart; }
}
