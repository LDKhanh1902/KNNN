package vn.DA_KNNN.Components;

import javax.swing.*;
import java.awt.*;

public class LineChart extends JPanel {
    private static final long serialVersionUID = 1L;
    private int[] revenues = {500000, 700000, 900000, 1200000, 1500000, 1700000, 2000000, 2300000, 2600000, 3000000, 3500000, 4000000};
    private String[] months = {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"};
    
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        
        int width = getWidth();
        int height = getHeight();
        int margin = 100;
        int graphWidth = width - 2 * margin;
        int graphHeight = height - 2 * margin;
        
        int maxRevenue = 4000000;
        
        // Vẽ tiêu đề biểu đồ
        g2.setFont(new Font("SansSerif", Font.BOLD, 16));
        g2.drawString("Xu hướng tăng trưởng", width / 2 - 80, 30);
        
        // Vẽ trục X và Y với nhãn
        g2.setStroke(new BasicStroke(2));
        g2.drawLine(margin, height - margin, width - margin, height - margin);
        g2.drawLine(margin, height - margin, margin, margin);
        g2.drawString("Tháng", width - margin + 30, height - margin + 20);
        g2.drawString("Doanh thu (VND)", margin - 40, margin - 10);
        
        // Vẽ đường xu hướng
        g2.setColor(Color.RED);
        for (int i = 0; i < revenues.length - 1; i++) {
            int x1 = margin + i * (graphWidth / (revenues.length - 1));
            int y1 = height - margin - (revenues[i] * graphHeight / maxRevenue);
            int x2 = margin + (i + 1) * (graphWidth / (revenues.length - 1));
            int y2 = height - margin - (revenues[i + 1] * graphHeight / maxRevenue);
            g2.drawLine(x1, y1, x2, y2);
            g2.fillOval(x1 - 3, y1 - 3, 6, 6);
            g2.drawString(String.format("%,d VND", revenues[i]), x1, y1 - 10);
        }
        // Vẽ điểm cuối
        int xLast = margin + (revenues.length - 1) * (graphWidth / (revenues.length - 1));
        int yLast = height - margin - (revenues[revenues.length - 1] * graphHeight / maxRevenue);
        g2.fillOval(xLast - 3, yLast - 3, 6, 6);
        g2.drawString(String.format("%,d VND", revenues[revenues.length - 1]), xLast, yLast - 10);
        
        // Vẽ nhãn tháng
        g2.setColor(Color.BLACK);
        for (int i = 0; i < months.length; i++) {
            int x = margin + i * (graphWidth / (revenues.length - 1));
            g2.drawString(months[i], x - 10, height - margin + 20);
        }
    }
    
    public static void main(String[] args) {
        JFrame frame = new JFrame("Xu hướng tăng trưởng");
        LineChart chart = new LineChart();
        frame.add(chart);
        frame.setSize(800, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}
