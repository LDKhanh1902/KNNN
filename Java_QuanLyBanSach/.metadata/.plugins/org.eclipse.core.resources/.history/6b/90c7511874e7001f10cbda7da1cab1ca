package vn.DA_KNNN.Controller;

import java.sql.ResultSet;

import vn.DA_KNNN.Model.DataProvider;
import vn.DA_KNNN.Model.User;
import vn.DA_KNNN.View.MainView;

public class MainController {
	private MainView view;
	
	public MainController(MainView _view) {
		this.view = _view;
		
		this.view.getUserInfo().setText(User.getName());
		
		this.view.getBookCountValue().setText(getBookCount());
		
		this.view.getStaffCountValue().setText(getStaffCount());
		
		this.view.getStaffCountValue().setText(getStaffCount());

		this.view.getSoldBooksValue().setText(getSoldBooks());
		
		this.view.getRevenueValue().setText(getRevenue());
	}
	
	private String getBookCount() {
		String str = "";
		try(ResultSet rs = DataProvider.getInstance().view("SELECT COUNT(*) FROM book")){
			if(rs.next())
				rs.getString(1);
		}
		catch (Exception e) {
			// TODO: handle exception
			e.printStackTrace();
		}
		
		return str;
	}
	
	private String getStaffCount() {
		String str = "";
		try(ResultSet rs = DataProvider.getInstance().view("SELECT COUNT(*) FROM employee")){
			if(rs.next())
				rs.getString(1);
		}
		catch (Exception e) {
			// TODO: handle exception
			e.printStackTrace();
		}
		
		return str;
	}
	
	private String getSoldBooks() {
		String str = "";

		
		return str;
	}
	
	private String getRevenue() {
		String str = "";

		
		return str;
	}
}
