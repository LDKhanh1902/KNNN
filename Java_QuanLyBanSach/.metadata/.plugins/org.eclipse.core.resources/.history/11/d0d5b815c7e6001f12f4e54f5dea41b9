package vn.DA_KNNN.View;

import javax.swing.*;
import vn.DA_KNNN.Components.PieChart;
import vn.DA_KNNN.Components.ColumnChart;
import java.awt.*;

public class MainView extends JPanel {
    private static final long serialVersionUID = 1L;

    public MainView() {
        setLayout(new BorderLayout());
        setBackground(Color.WHITE);

        // **📌 Header Panel (Giữ cố định)**
        JPanel headerContainer = new JPanel(new BorderLayout());
        JPanel headerPanel = createHeader();
        headerContainer.add(headerPanel, BorderLayout.NORTH);
        headerContainer.setPreferredSize(new Dimension(getWidth(), 60)); // Giữ cố định header

        add(headerContainer, BorderLayout.NORTH);

        // **📌 Nội dung chính**
        JPanel mainContent = new JPanel(new BorderLayout());
        add(mainContent, BorderLayout.CENTER);

        // **📌 Thông tin tổng quan (Giữ nguyên chiều cao)**
        JPanel infoPanel = createInfoCards();
        mainContent.add(infoPanel, BorderLayout.NORTH); // Không bị co giãn

        // **📌 Khu vực biểu đồ (Có thể co giãn)**
        JPanel chartPanel = createChartPanel();
        mainContent.add(chartPanel, BorderLayout.CENTER); // Biểu đồ sẽ tự động co giãn

        // **📌 Footer**
        JPanel footerPanel = createFooter();
        add(footerPanel, BorderLayout.SOUTH);
    }

    /**
     * **📌 Header - Thông tin User và Doanh thu**
     */
    private JPanel createHeader() {
        JPanel headerPanel = new JPanel(new BorderLayout());
        headerPanel.setBackground(new Color(30, 144, 255));
        headerPanel.setPreferredSize(new Dimension(getWidth(), 60)); // Giữ nguyên kích thước

        // 📌 Tiêu đề (Căn giữa)
        JLabel title = new JLabel("📚 Hệ thống Quản lý Bán Sách", SwingConstants.CENTER);
        title.setForeground(Color.WHITE);
        title.setFont(new Font("Tahoma", Font.BOLD, 18));
        headerPanel.add(title, BorderLayout.CENTER);

        // 📌 Thông tin User (Dịch vào trong)
        JPanel userPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 15, 10));
        userPanel.setOpaque(false); // Giữ màu nền trong suốt
        JLabel userInfo = new JLabel("👤 Xin chào, Nguyễn Văn A");
        userInfo.setForeground(Color.WHITE);
        userInfo.setFont(new Font("Tahoma", Font.PLAIN, 14));
        userPanel.add(userInfo);

        headerPanel.add(userPanel, BorderLayout.EAST);

        return headerPanel;
    }

    /**
     * **📌 Thông tin Tổng quan**
     */
    private JPanel createInfoCards() {
        JPanel infoPanel = new JPanel();
        infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.X_AXIS)); // Sắp xếp theo hàng ngang
        infoPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        // Đặt kích thước cố định cho infoPanel
        infoPanel.setPreferredSize(new Dimension(1000, 100));
        infoPanel.setMaximumSize(new Dimension(1000, 100)); // Không cho phép co giãn theo chiều dọc

        infoPanel.add(createInfoCard("📚 Số lượng sách: 120"));
        infoPanel.add(Box.createHorizontalStrut(10)); // Khoảng cách
        infoPanel.add(createInfoCard("👥 Số nhân viên: 10"));
        infoPanel.add(Box.createHorizontalStrut(10));
        infoPanel.add(createInfoCard("🛍️ Số khách hàng: 250"));
        infoPanel.add(Box.createHorizontalStrut(10));
        infoPanel.add(createInfoCard("💰 Tổng doanh thu: 5.000.000 VNĐ"));

        return infoPanel;
    }

    private JPanel createInfoCard(String text) {
        JPanel card = new JPanel(new BorderLayout());
        card.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));
        card.setBackground(Color.WHITE);
        card.setPreferredSize(new Dimension(200, 80)); // Kích thước cố định

        JLabel label = new JLabel(text, SwingConstants.CENTER);
        label.setFont(new Font("Tahoma", Font.PLAIN, 14));
        card.add(label, BorderLayout.CENTER);

        return card;
    }

    /**
     * **📌 Khu vực Biểu đồ**
     */
    private JPanel createChartPanel() {
        JPanel chartPanel = new JPanel(new GridLayout(1, 2, 10, 10));
        chartPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        PieChart pieChart = new PieChart(); // Biểu đồ loại sách bán chạy
        ColumnChart columnChart = new ColumnChart(); // Biểu đồ doanh thu theo tháng

        chartPanel.add(pieChart);
        chartPanel.add(columnChart);

        return chartPanel;
    }

    /**
     * **📌 Footer**
     */
    private JPanel createFooter() {
        JPanel footerPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 10, 10));
        footerPanel.setPreferredSize(new Dimension(getWidth(), 40));
        footerPanel.setBackground(new Color(70, 70, 70));

        JLabel footerLabel = new JLabel("© 2025 Hệ thống Quản lý Bán Sách - Nhóm 8");
        footerLabel.setForeground(Color.WHITE);
        footerPanel.add(footerLabel);

        return footerPanel;
    }

    /**
     * **📌 Chạy ứng dụng**
     */
    public static void main(String[] args) {
        JFrame frame = new JFrame("Hệ thống Quản lý Bán Sách");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(1200, 700);
        frame.getContentPane().add(new MainView());
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
}
