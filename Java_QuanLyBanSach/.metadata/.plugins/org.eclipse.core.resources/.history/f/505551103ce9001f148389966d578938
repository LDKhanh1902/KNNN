package vn.DA_KNNN.View;

import javax.swing.*;
import vn.DA_KNNN.Controller.MainController;

import java.awt.*;

public class LayoutView extends JFrame {
	private static final long serialVersionUID = 1L;
	private JPanel contentPanel;
	private JButton btnHome;
	private JButton btnCategory;
	private JButton btnBook;
	private JButton btnCustomer;
	private JButton btnSale;
	private JButton btnEmployee;
	private JButton btnRevenue;
	private JPanel panel, buttonPanel;
	private JButton btnLogout;

	public JPanel getContentPanel() {
		return contentPanel;
	}

	public JButton getBtnHome() {
		return btnHome;
	}

	public JButton getBtnCategory() {
		return btnCategory;
	}

	public JButton getBtnBook() {
		return btnBook;
	}

	public JButton getBtnSale() {
		return btnSale;
	}

	public JButton getBtnCustomer() {
		return btnCustomer;
	}

	public JButton getBtnEmployee() {
		return btnEmployee;
	}

	public JButton getBtnRevenue() {
		return btnRevenue;
	}

	public JButton getBtnLogout() {
		return btnLogout;
	}

	public JPanel getMenuButton() {
		return this.buttonPanel;
	}

	public LayoutView() {
		try {
			UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
		} catch (Exception e) {
			e.printStackTrace();
		}

		ImageIcon icon = new ImageIcon(getClass().getResource("/images/imgIcon.jpeg"));
		setIconImage(icon.getImage());
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setTitle("Đăng nhập");
		setSize(1000, 600);
		setMinimumSize(new Dimension(1000, 600));

		getContentPane().setLayout(new BorderLayout());
		JPanel sidebar = createSidebar();
		getContentPane().add(sidebar, BorderLayout.WEST);

		contentPanel = new JPanel(new BorderLayout());
		contentPanel.setBackground(Color.WHITE);
		getContentPane().add(contentPanel, BorderLayout.CENTER);

		MainView view = new MainView();
		new MainController(view);
		showContent(view);
	}

	private JPanel createSidebar() {
		JPanel sidebar = new JPanel();
		sidebar.setLayout(new BorderLayout());
		sidebar.setPreferredSize(new Dimension(200, 0));
		sidebar.setBackground(new Color(60, 63, 65));

		JLabel titleLabel = new JLabel("QKT", SwingConstants.CENTER);
		titleLabel.setFont(new Font("Tahoma", Font.BOLD, 36));
		titleLabel.setForeground(Color.WHITE);
		titleLabel.setPreferredSize(new Dimension(WIDTH, 100));
		sidebar.add(titleLabel, BorderLayout.NORTH);

		JPanel buttonPanel = createMenuButtons();
		sidebar.add(buttonPanel, BorderLayout.CENTER);

		panel = new JPanel();
		sidebar.add(panel, BorderLayout.SOUTH);
		panel.setLayout(new BorderLayout(0, 0));

		btnLogout = new JButton("Đăng xuất");
		btnLogout.setBackground(Color.RED);
		btnLogout.setOpaque(true);
		btnLogout.setBorderPainted(false);
		btnLogout.setPreferredSize(new Dimension(WIDTH, 50));
		btnLogout.setFont(new Font("Tahoma", Font.PLAIN, 20));
		panel.add(btnLogout);

		return sidebar;
	}

	private JPanel createMenuButtons() {
		buttonPanel = new JPanel(new GridLayout(10, 1, 0, 0));
		buttonPanel.setBackground(new Color(60, 63, 65));
		
		btnHome = createButton("Home", "/images/home.png");
		btnBook = createButton("Book", "/images/book.png");	
		btnSale = createButton("Sale", "/images/receipt.png");		
		btnEmployee = createButton("Employee", "/images/employee.png");		
		btnRevenue = createButton("Revenue", "/images/revenue.png");

		buttonPanel.add(btnHome);
		buttonPanel.add(btnBook);
		buttonPanel.add(btnSale);
		buttonPanel.add(btnEmployee);
		buttonPanel.add(btnRevenue);

		return buttonPanel;
	}
	
	private JButton createButton(String text,String url) {
		JButton btn = new JButton(text,setSizeImage(url));
		
		btn.setHorizontalAlignment(SwingConstants.LEADING);
		btn.setFont(new Font("Tahoma", Font.PLAIN, 20));
		btn.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
		btn.setBackground(new Color(100, 100, 100));
		btn.setOpaque(true);
		btn.setForeground(Color.WHITE);
		btn.setBorderPainted(false);
		
		return btn;
	}

    private static ImageIcon setSizeImage(String url) {
    	ImageIcon icon = new ImageIcon(Test.class.getResource(url));
        Image img = icon.getImage();
        Image scaledImg = img.getScaledInstance(50, 50, Image.SCALE_SMOOTH);
        ImageIcon scaledIcon = new ImageIcon(scaledImg);
        return scaledIcon;
    }

	public void showContent(JPanel content) {
		contentPanel.removeAll();
		contentPanel.add(content, BorderLayout.CENTER);
		revalidate();
		repaint();
	}
}
