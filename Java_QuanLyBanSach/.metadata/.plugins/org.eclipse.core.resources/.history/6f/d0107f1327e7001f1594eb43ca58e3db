package vn.DA_KNNN.Components;

import javax.swing.JFrame;
import javax.swing.JPanel;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.data.category.DefaultCategoryDataset;
import java.awt.Color;
import javax.swing.BoxLayout;

public class ColumnChart extends JPanel {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private final int[] values;
	private final String[] columnNames;

	public int[] getValues() {
		return values;
	}

	public String[] getColumnNames() {
		return columnNames;
	}

	public static void main(String[] args) {
		// Tạo JFrame để chứa JPanel
		JFrame frame = new JFrame("Column Chart Example");
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.getContentPane()
				.add(createChartPanel(new int[] { 10, 30, 20, 40, 30, 20, 40, 30, 20, 40 }, "Series 1", new String[] { "A", "B", "C", "D", "B", "C", "D", "B", "C", "D" })); // Thêm
																														// JPanel
																														// chứa
																														// biểu
																														// đồ
																														// cột
																														// vào
																														// JFrame
		frame.setSize(600, 400); // Đặt kích thước cho JFrame
		frame.setLocationRelativeTo(null); // Đặt JFrame ở giữa màn hình
		frame.setVisible(true); // Hiển thị JFrame
	}

	public ColumnChart() {
		this.values = new int[] { 10, 30, 20, 40 };
		this.columnNames = new String[] { "A", "B", "C", "D" };

		setLayout(new BoxLayout(this, BoxLayout.X_AXIS));

		JPanel panel = new JPanel();
		add(panel);
		panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));
		panel.add(createChartPanel(new int[] { 10, 30, 20, 40, 30, 20, 40, 30, 20, 40 }, "Series 1", new String[] { "A", "B", "C", "D", "B", "C", "D", "B", "C", "D" }));
	}

	private static JPanel createChartPanel(int[] values, String series, String[] columnNames) {
		// Tạo dataset cho Column Chart
		DefaultCategoryDataset dataset = new DefaultCategoryDataset();

		for (int i = 0; i < values.length; i++) {
			dataset.addValue(values[i], series, columnNames[i]);
		}

		// Tạo Column Chart từ dataset
		JFreeChart chart = ChartFactory.createBarChart("Column Chart Example", // Tên biểu đồ
				"Thời điẻm (Tháng)", // Tên trục X
				"Doanh thu (VND)", // Tên trục Y
				dataset, // Dữ liệu
				org.jfree.chart.plot.PlotOrientation.VERTICAL, // Định hướng cột (Dọc)
				true, // Bao gồm chú thích (legend)
				true, // Bao gồm tooltips
				false // Không bao gồm URL
		);

		// Tùy chỉnh màu sắc cho cột
		CategoryPlot plot = (CategoryPlot) chart.getPlot();
		plot.getRenderer().setSeriesPaint(0, new Color(100, 150, 255)); // Màu cột

		// Tạo một ChartPanel và gán biểu đồ vào đó
		ChartPanel chartPanel = new ChartPanel(chart);
		chartPanel.setPreferredSize(new java.awt.Dimension(600, 400));

		// Trả về ChartPanel chứa biểu đồ cột
		return chartPanel;
	}
}
